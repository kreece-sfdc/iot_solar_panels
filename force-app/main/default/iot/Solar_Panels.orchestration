{"global":{"id":0,"initial":false,"name":"Always","rules":[{"actions":[],"condition":"","description":"","id":0}]},"properties":{},"states":[{"id":1,"initial":true,"name":"Healthy","rules":[{"actions":[{"fieldAssignments":[{"field":"Health__c","value":"Solar_Panel_Monitor__e.Health__c"}],"id":0,"isResponseIngested":false,"label":"Update Asset Health","name":"Edit","recordFilters":[{"field":"Solar_Panel_Serial_Number__c","value":"Solar_Panel_Monitor__e.Device_Id__c"}],"responseEventName":"","salesforceObjectApiName":"Asset","type":"SalesforceOutputAction"}],"condition":"","description":"","id":2,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}},{"actions":[{"stateId":2,"type":"ChangeState"}],"condition":"Solar_Panel_Monitor__e.Health__c<Asset.Critical_Threshold__c","description":"","id":1,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}},{"actions":[{"stateId":3,"type":"ChangeState"}],"condition":"Solar_Panel_Monitor__e.Health__c<Asset.Warning_Threshold__c","description":"","id":0,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}}]},{"id":3,"initial":false,"name":"Warning","rules":[{"actions":[{"fieldAssignments":[{"field":"Health__c","value":"Solar_Panel_Monitor__e.Health__c"}],"id":0,"isResponseIngested":false,"label":"Update Asset Health","name":"Edit","recordFilters":[{"field":"Solar_Panel_Serial_Number__c","value":"Solar_Panel_Monitor__e.Device_Id__c"}],"responseEventName":"","salesforceObjectApiName":"Asset","type":"SalesforceOutputAction"}],"condition":"","description":"","id":2,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}},{"actions":[{"stateId":2,"type":"ChangeState"}],"condition":"Solar_Panel_Monitor__e.Health__c<Asset.Critical_Threshold__c","description":"","id":0,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}},{"actions":[{"stateId":1,"type":"ChangeState"}],"condition":"Solar_Panel_Monitor__e.Health__c>=Asset.Warning_Threshold__c","description":"","id":1,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}}]},{"id":2,"initial":false,"name":"Error","rules":[{"actions":[{"fieldAssignments":[{"field":"Subject","value":"\"Service Solar Panel\""},{"field":"Priority","value":"\"High\""},{"field":"AssetId","value":"Asset.Id"}],"id":0,"isResponseIngested":true,"label":"Create Case","name":"Create","recordFilters":[],"responseEventName":"caseResponse","salesforceObjectApiName":"Case","type":"SalesforceOutputAction"}],"condition":"","description":"","id":0,"when":{"type":"Immediately"}},{"actions":[{"type":"AssignVariable","value":"caseResponse.Id","variableId":0}],"condition":"","description":"","id":1,"when":{"eventSource":"caseResponse","type":"Event"}},{"actions":[{"fieldAssignments":[{"field":"Health__c","value":"Solar_Panel_Monitor__e.Health__c"}],"id":0,"isResponseIngested":false,"label":"Update Asset Health","name":"Edit","recordFilters":[{"field":"Solar_Panel_Serial_Number__c","value":"Solar_Panel_Monitor__e.Device_Id__c"}],"responseEventName":"","salesforceObjectApiName":"Asset","type":"SalesforceOutputAction"}],"condition":"","description":"","id":4,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}},{"actions":[{"fieldAssignments":[{"field":"Status","value":"\"Closed\""}],"id":1,"isResponseIngested":true,"label":"Salesforce Output Action","name":"Edit","recordFilters":[{"field":"Id","value":"CaseId"}],"responseEventName":"caseClosedToWarning","salesforceObjectApiName":"Case","type":"SalesforceOutputAction"},{"stateId":1,"type":"ChangeState"}],"condition":"Solar_Panel_Monitor__e.Health__c>=Asset.Warning_Threshold__c","description":"","id":2,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}},{"actions":[{"fieldAssignments":[{"field":"Status","value":"\"Closed\""}],"id":1,"isResponseIngested":true,"label":"Salesforce Output Action","name":"Edit","recordFilters":[{"field":"Id","value":"CaseId"}],"responseEventName":"caseClosedToError","salesforceObjectApiName":"Case","type":"SalesforceOutputAction"},{"stateId":3,"type":"ChangeState"}],"condition":"Solar_Panel_Monitor__e.Health__c>=Asset.Critical_Threshold__c && Solar_Panel_Monitor__e.Health__c<Asset.Warning_Threshold__c","description":"","id":3,"when":{"eventSource":"Solar_Panel_Monitor__e","type":"Event"}}]}],"variables":[{"condition":"","dataType":"String","description":"","eventSource":"caseResponse","id":0,"initialValue":"\"\"","name":"CaseId"}]}